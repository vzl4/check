import{R as g,aG as F,aH as S,U as o,a as i,cu as G,bk as A,W as _,r as s,G as n,cq as r,cv as m,c7 as v,bo as h,bp as y,j as l,ay as u,l as f,bj as w,ax as k}from"./main-Cz_EDjso.js";import{M as E}from"./ModalExternal-Bc4p8-uQ.js";import"./analytics-C4g1w3Ww.js";import"./workers-0KObbvUQ.js";import"./ScrollArea-D_4_3NIY.js";const U=()=>{const{closeModal:d}=F(S.ConfirmRematchRequestModal),c=o(e=>e.p2p.sendRematchRequest),b=o(e=>e.online.setConfirmationRematchFake),q=o(e=>e.online.onReady),R=o(e=>e.online.setOfflineState),x=o(e=>e.modals.closeAllModals),O=i(e=>e.flags.confirmationDuration),p=i(e=>e.board.myColor),a=i(e=>e.app.gameType),t=G(),M=A(_.Neutral),j=s.useCallback(()=>{x(),a===n.FakeOnline?b({player:r.Confirmed}):(c(!0),m.rematch.player.confirm(!0),q({turn:v(p),gameType:a}))},[p,a]),C=s.useCallback(()=>{d(),a!==n.FakeOnline&&c(!1),m.rematch.player.confirm(!1),a!==n.FakeOnline&&R({reason:"rematch_request_reject"})},[a]);s.useEffect(()=>{if(a!==n.FakeOnline)return;const e=setTimeout(C,O*1e3);return()=>clearTimeout(e)},[]);const T=s.useCallback(()=>{d(),t.player===r.UnKnown&&a!==n.FakeOnline&&(m.rematch.player.confirm(!1),c(!1),R({reason:"rematch_request_close_modal"}))},[t==null?void 0:t.player,a]);return!h().feature[y.Online]&&!h().feature[y.OnlineTogether]?null:l.jsx(E,{fullScreen:!1,visible:!0,id:f.modal.confirmRematchRequest.index,onClose:T,size:"auto",title:u("agreeToARematch"),titleCentered:!0,withCloseButton:!1,closeOnClickOutside:!1,children:l.jsxs(w,{justify:"center",gap:"xs",onlyHorOffset:!0,children:[l.jsx(k,{disabled:t.player!==r.UnKnown,onClick:j,id:f.modal.confirmRematchRequest.button.confirmRematchRequest,children:u("toAccept")}),l.jsx(k,{color:M,disabled:t.player!==r.UnKnown,onClick:C,id:f.modal.confirmRematchRequest.button.cancelRematchRequest,children:u("refuse")})]})})},z=g.memo(U);export{z as default};
