import{r as h,d4 as ht,y as ve,aY as Se,j as s,z as I,dl as pt,dO as bt,bL as De,x as Ie,a_ as Le,a$ as be,aT as xt,bb as vt,aX as St,bG as Ct,aV as yt,bg as _t,bf as Mt,R as L,aQ as jt,T as se,cS as Ce,a as P,U as q,aC as Ve,ay as z,dP as kt,dQ as k,dR as wt,bk as A,W as U,ax as $e,bn as ie,dS as Tt,K as X,dT as Bt,bt as Pt,aM as Ft,b as ze,M as le,bF as ye,cc as Ae,e as Ue,ab as Fe,B as Nt,a4 as te,l as K,f as Rt,S as G,a3 as Et,aG as Dt,aH as It,dU as $,bZ as Lt,dN as Vt,J as $t}from"./main-Cz_EDjso.js";import{M as zt}from"./ModalExternal-Bc4p8-uQ.js";import{B as At}from"./BoardCellFading-DcyL0ksJ.js";import{Y as fe}from"./analytics-C4g1w3Ww.js";import{B as Ut}from"./Background-CzE9_nId.js";import"./workers-0KObbvUQ.js";import"./ScrollArea-D_4_3NIY.js";function Y(e,t,o){return t===void 0&&o===void 0?e:t!==void 0&&o===void 0?Math.max(e,t):Math.min(t===void 0&&o!==void 0?e:Math.max(e,t),o)}function Ht(e,t,o="ltr"){const n=h.useRef(!1),l=h.useRef(!1),i=h.useRef(0),[m,c]=h.useState(!1),a=h.useRef(null);return h.useEffect(()=>{n.current=!0},[]),{ref:h.useCallback(r=>{if(a.current&&(a.current(),a.current=null),!r)return;const f=({x:p,y:T})=>{cancelAnimationFrame(i.current),i.current=requestAnimationFrame(()=>{if(n.current&&r){r.style.userSelect="none";const v=r.getBoundingClientRect();if(v.width&&v.height){const _=Y((p-v.left)/v.width,0,1);e({x:o==="ltr"?_:1-_,y:Y((T-v.top)/v.height,0,1)})}}})},u=()=>{document.addEventListener("mousemove",F),document.addEventListener("mouseup",y),document.addEventListener("touchmove",E,{passive:!1}),document.addEventListener("touchend",y)},x=()=>{document.removeEventListener("mousemove",F),document.removeEventListener("mouseup",y),document.removeEventListener("touchmove",E),document.removeEventListener("touchend",y)},S=()=>{!l.current&&n.current&&(l.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),c(!0),u())},y=()=>{l.current&&n.current&&(l.current=!1,c(!1),x(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},g=p=>{S(),p.preventDefault(),F(p)},F=p=>f({x:p.clientX,y:p.clientY}),w=p=>{p.cancelable&&p.preventDefault(),S(),E(p)},E=p=>{p.cancelable&&p.preventDefault(),f({x:p.changedTouches[0].clientX,y:p.changedTouches[0].clientY})};r.addEventListener("mousedown",g),r.addEventListener("touchstart",w,{passive:!1}),a.current=()=>{r.removeEventListener("mousedown",g),r.removeEventListener("touchstart",w)}},[o,e]),active:m}}function Ne(e,t){return t.length===0?e:t.reduce((o,n)=>Math.abs(n-e)<Math.abs(o-e)?n:o)}var He={root:"m_4451eb3a"};const oe=ht((e,t)=>{const o=ve("Center",null,e),{classNames:n,className:l,style:i,styles:m,unstyled:c,vars:a,inline:d,mod:r,attributes:f,...u}=o,x=Se({name:"Center",props:o,classes:He,className:l,style:i,classNames:n,styles:m,unstyled:c,attributes:f,vars:a});return s.jsx(I,{ref:t,mod:[{inline:d},r],...x("root"),...u})});oe.classes=He;oe.displayName="@mantine/core/Center";function Wt({size:e,thickness:t,sum:o,value:n,root:l,offset:i}){const m=(e*.9-t*2)/2,c=Math.PI*m*2/100,a=l||n===void 0?`${(100-o)*c}, ${o*c}`:`${n*c}, ${(100-n)*c}`;return{strokeWidth:Number.isNaN(t)?12:t,cx:e/2||0,cy:e/2||0,r:m||0,transform:l?`scale(1, -1) translate(0, -${e})`:void 0,strokeDasharray:a,strokeDashoffset:l?0:i||0}}function We({size:e,value:t,offset:o,sum:n,thickness:l,root:i,color:m,lineRoundCaps:c,tooltip:a,getStyles:d,display:r,...f}){const u=pt();return s.jsx(bt.Floating,{disabled:!a,label:a,children:s.jsx(I,{component:"circle",...f,...d("curve"),__vars:{"--curve-color":m?De(m,u):void 0},fill:"none",strokeLinecap:c?"round":"butt",...Wt({sum:n,size:e,thickness:l,value:t,offset:o,root:i})})})}We.displayName="@mantine/core/Curve";function Ot({size:e,thickness:t,sections:o,renderRoundedLineCaps:n,rootColor:l}){const i=o.reduce((r,f)=>r+f.value,0),m=Math.PI*((e*.9-t*2)/2)*2;let c=m;const a=[],d=[];for(let r=0;r<o.length;r+=1)a.push({sum:i,offset:c,data:o[r],root:!1}),c-=o[r].value/100*m;if(a.push({sum:i,offset:c,data:{color:l},root:!0}),d.push({...a[a.length-1],lineRoundCaps:!1}),a.length>2){d.push({...a[0],lineRoundCaps:n}),d.push({...a[a.length-2],lineRoundCaps:n});for(let r=1;r<=a.length-3;r+=1)d.push({...a[r],lineRoundCaps:!1})}else d.push({...a[0],lineRoundCaps:n});return d}var Oe={root:"m_b32e4812",svg:"m_d43b5134",curve:"m_b1ca1fbf",label:"m_b23f9dc4"};function Gt(e,t){return Math.min(e||12,(t||120)/4)}const Kt={size:120,thickness:12},Yt=Le((e,{size:t,thickness:o,transitionDuration:n})=>({root:{"--rp-size":be(t),"--rp-label-offset":be(o*2),"--rp-transition-duration":n?`${n}ms`:void 0}})),_e=Ie((e,t)=>{const o=ve("RingProgress",Kt,e),{classNames:n,className:l,style:i,styles:m,unstyled:c,vars:a,label:d,sections:r,size:f,thickness:u,roundCaps:x,rootColor:S,transitionDuration:y,attributes:g,...F}=o,w=Se({name:"RingProgress",classes:Oe,props:o,className:l,style:i,classNames:n,styles:m,unstyled:c,attributes:g,vars:a,varsResolver:Yt}),E=Gt(u,f),p=Ot({size:f,thickness:E,sections:r,renderRoundedLineCaps:x,rootColor:S}).map(({data:T,sum:v,root:_,lineRoundCaps:de,offset:ue},me)=>h.createElement(We,{...T,key:me,size:f,thickness:E,sum:v,offset:ue,color:T==null?void 0:T.color,root:_,lineRoundCaps:de,getStyles:w}));return s.jsxs(I,{...w("root"),size:f,ref:t,...F,children:[s.jsx("svg",{...w("svg"),children:p}),d&&s.jsx("div",{...w("label"),children:d})]})});_e.classes=Oe;_e.displayName="@mantine/core/RingProgress";const[qt,ce]=xt("SliderProvider was not found in tree"),Ge=h.forwardRef(({size:e,disabled:t,variant:o,color:n,thumbSize:l,radius:i,...m},c)=>{const{getStyles:a}=ce();return s.jsx(I,{tabIndex:-1,variant:o,size:e,ref:c,...a("root"),...m})});Ge.displayName="@mantine/core/SliderRoot";const Ke=h.forwardRef(({max:e,min:t,value:o,position:n,label:l,dragging:i,onMouseDown:m,onKeyDownCapture:c,labelTransitionProps:a,labelAlwaysOn:d,thumbLabel:r,onFocus:f,onBlur:u,showLabelOnHover:x,isHovered:S,children:y=null,disabled:g},F)=>{const{getStyles:w}=ce(),[E,p]=h.useState(!1),T=d||i||E||x&&S;return s.jsxs(I,{tabIndex:0,role:"slider","aria-label":r,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":o,ref:F,__vars:{"--slider-thumb-offset":`${n}%`},...w("thumb",{focusable:!0}),mod:{dragging:i,disabled:g},onFocus:v=>{p(!0),typeof f=="function"&&f(v)},onBlur:v=>{p(!1),typeof u=="function"&&u(v)},onTouchStart:m,onMouseDown:m,onKeyDownCapture:c,onClick:v=>v.stopPropagation(),children:[y,s.jsx(vt,{mounted:l!=null&&!!T,transition:"fade",duration:0,...a,children:v=>s.jsx("div",{...w("label",{style:v}),children:l})})]})});Ke.displayName="@mantine/core/SliderThumb";function Ye({value:e,min:t,max:o}){const n=(e-t)/(o-t)*100;return Math.min(Math.max(n,0),100)}function Xt({mark:e,offset:t,value:o,inverted:n=!1}){return n?typeof t=="number"&&e.value<=t||e.value>=o:typeof t=="number"?e.value>=t&&e.value<=o:e.value<=o}function qe({marks:e,min:t,max:o,disabled:n,value:l,offset:i,inverted:m}){const{getStyles:c}=ce();if(!e)return null;const a=e.map((d,r)=>h.createElement(I,{...c("markWrapper"),__vars:{"--mark-offset":`${Ye({value:d.value,min:t,max:o})}%`},key:r},s.jsx(I,{...c("mark"),mod:{filled:Xt({mark:d,value:l,offset:i,inverted:m}),disabled:n}}),d.label&&s.jsx("div",{...c("markLabel"),children:d.label})));return s.jsx("div",{children:a})}qe.displayName="@mantine/core/SliderMarks";function Xe({filled:e,children:t,offset:o,disabled:n,marksOffset:l,inverted:i,containerProps:m,...c}){const{getStyles:a}=ce();return s.jsx(I,{...a("trackContainer"),mod:{disabled:n},...m,children:s.jsxs(I,{...a("track"),mod:{inverted:i,disabled:n},children:[s.jsx(I,{mod:{inverted:i,disabled:n},__vars:{"--slider-bar-width":`calc(${e}% + 2 * var(--slider-size))`,"--slider-bar-offset":`calc(${o}% - var(--slider-size))`},...a("bar")}),t,s.jsx(qe,{...c,offset:l,disabled:n,inverted:i})]})})}Xe.displayName="@mantine/core/SliderTrack";function Qt({value:e,containerWidth:t,min:o,max:n,step:l,precision:i}){const c=(t?Math.min(Math.max(e,0),t)/t:e)*(n-o),a=(c!==0?Math.round(c/l)*l:0)+o,d=Math.max(a,o);return i!==void 0?Number(d.toFixed(i)):d}function ae(e,t){return parseFloat(e.toFixed(t))}function Zt(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}function he(e,t){const n=[...t].sort((l,i)=>l.value-i.value).find(l=>l.value>e);return n?n.value:e}function pe(e,t){const n=[...t].sort((l,i)=>i.value-l.value).find(l=>l.value<e);return n?n.value:e}function Re(e){const t=[...e].sort((o,n)=>o.value-n.value);return t.length>0?t[0].value:0}function Ee(e){const t=[...e].sort((o,n)=>o.value-n.value);return t.length>0?t[t.length-1].value:100}var Qe={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const Jt={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},thumbLabel:"",showLabelOnHover:!0,scale:e=>e,size:"md"},es=Le((e,{size:t,color:o,thumbSize:n,radius:l})=>({root:{"--slider-size":Mt(t,"slider-size"),"--slider-color":o?De(o,e):void 0,"--slider-radius":l===void 0?void 0:_t(l),"--slider-thumb-size":n!==void 0?be(n):"calc(var(--slider-size) * 2)"}})),Me=Ie((e,t)=>{const o=ve("Slider",Jt,e),{classNames:n,styles:l,value:i,onChange:m,onChangeEnd:c,size:a,min:d,max:r,domain:f,step:u,precision:x,defaultValue:S,name:y,marks:g,label:F,labelTransitionProps:w,labelAlwaysOn:E,thumbLabel:p,showLabelOnHover:T,thumbChildren:v,disabled:_,unstyled:de,scale:ue,inverted:me,className:et,style:tt,vars:st,hiddenInputProps:ot,restrictToMarks:D,thumbProps:nt,attributes:rt,...at}=o,it=Se({name:"Slider",props:o,classes:Qe,classNames:n,className:et,styles:l,style:tt,attributes:rt,vars:st,varsResolver:es,unstyled:de}),{dir:Q}=St(),[lt,je]=h.useState(!1),[M,j]=Ct({value:typeof i=="number"?Y(i,d,r):i,defaultValue:typeof S=="number"?Y(S,d,r):S,finalValue:Y(0,d,r),onChange:m}),ge=h.useRef(M),Z=h.useRef(c);h.useEffect(()=>{Z.current=c},[c]);const ke=h.useRef(null),V=h.useRef(null),[J,ee]=f||[d,r],we=Ye({value:M,min:J,max:ee}),ne=ue(M),ct=typeof F=="function"?F(ne):F,H=x??Zt(u),dt=h.useCallback(({x:C})=>{if(!_){const W=Qt({value:C,min:J,max:ee,step:u,precision:H}),O=Y(W,d,r);j(D&&(g!=null&&g.length)?Ne(O,g.map(re=>re.value)):O),ge.current=O}},[_,d,r,J,ee,u,H,j,g,D]),ut=h.useCallback(()=>{if(!_&&Z.current){const C=D&&(g!=null&&g.length)?Ne(ge.current,g.map(W=>W.value)):ge.current;Z.current(C)}},[_,g,D]),{ref:mt,active:gt}=Ht(dt,{onScrubEnd:ut},Q),B=h.useCallback(C=>{!_&&Z.current&&Z.current(C)},[_]),ft=C=>{var W,O,re,Te,Be,Pe;if(!_)switch(C.key){case"ArrowUp":{if(C.preventDefault(),(W=V.current)==null||W.focus(),D&&g){const R=he(M,g);j(R),B(R);break}const N=ae(Math.min(Math.max(M+u,d),r),H);j(N),B(N);break}case"ArrowRight":{if(C.preventDefault(),(O=V.current)==null||O.focus(),D&&g){const R=Q==="rtl"?pe(M,g):he(M,g);j(R),B(R);break}const N=ae(Math.min(Math.max(Q==="rtl"?M-u:M+u,d),r),H);j(N),B(N);break}case"ArrowDown":{if(C.preventDefault(),(re=V.current)==null||re.focus(),D&&g){const R=pe(M,g);j(R),B(R);break}const N=ae(Math.min(Math.max(M-u,d),r),H);j(N),B(N);break}case"ArrowLeft":{if(C.preventDefault(),(Te=V.current)==null||Te.focus(),D&&g){const R=Q==="rtl"?he(M,g):pe(M,g);j(R),B(R);break}const N=ae(Math.min(Math.max(Q==="rtl"?M+u:M-u,d),r),H);j(N),B(N);break}case"Home":{if(C.preventDefault(),(Be=V.current)==null||Be.focus(),D&&g){j(Re(g)),B(Re(g));break}j(d),B(d);break}case"End":{if(C.preventDefault(),(Pe=V.current)==null||Pe.focus(),D&&g){j(Ee(g)),B(Ee(g));break}j(r),B(r);break}}};return s.jsx(qt,{value:{getStyles:it},children:s.jsxs(Ge,{...at,ref:yt(t,ke),onKeyDownCapture:ft,onMouseDownCapture:()=>{var C;return(C=ke.current)==null?void 0:C.focus()},size:a,disabled:_,children:[s.jsx(Xe,{inverted:me,offset:0,filled:we,marks:g,min:J,max:ee,value:ne,disabled:_,containerProps:{ref:mt,onMouseEnter:T?()=>je(!0):void 0,onMouseLeave:T?()=>je(!1):void 0},children:s.jsx(Ke,{max:ee,min:J,value:ne,position:we,dragging:gt,label:ct,ref:V,labelTransitionProps:w,labelAlwaysOn:E,thumbLabel:p,showLabelOnHover:T,isHovered:lt,disabled:_,...nt,children:v})}),s.jsx("input",{type:"hidden",name:y,value:ne,...ot})]})})});Me.classes=Qe;Me.displayName="@mantine/core/Slider";const ts="_boardSettingsModal_segmentedControl_2ke8m_1",ss="_boardSettingsModal_switcher_2ke8m_4",os="_boardSettingsModal_figureThemeComponent_2ke8m_10",ns="_boardSettingsModal_slider_2ke8m_88",rs="_designContainer_2ke8m_95",as="_boardFrame_2ke8m_103",is="_boardBox_2ke8m_117",ls="_boardCellsBox_2ke8m_132",cs="_boardIm_2ke8m_141",b={boardSettingsModal_segmentedControl:ts,boardSettingsModal_switcher:ss,boardSettingsModal_figureThemeComponent:os,"boardSettingsModal_figureThemeComponent-shadow-right":"_boardSettingsModal_figureThemeComponent-shadow-right_2ke8m_13","boardSettingsModal_figureThemeComponent-shadow-right-bottom":"_boardSettingsModal_figureThemeComponent-shadow-right-bottom_2ke8m_23","boardSettingsModal_figureThemeComponent-shadow-left":"_boardSettingsModal_figureThemeComponent-shadow-left_2ke8m_33","boardSettingsModal_figureThemeComponent-shadow-left-bottom":"_boardSettingsModal_figureThemeComponent-shadow-left-bottom_2ke8m_43","boardSettingsModal_figureThemeComponent-shadow-bottom":"_boardSettingsModal_figureThemeComponent-shadow-bottom_2ke8m_53","boardSettingsModal_figureThemeComponent-shadow-center":"_boardSettingsModal_figureThemeComponent-shadow-center_2ke8m_63",boardSettingsModal_slider:ns,designContainer:rs,boardFrame:as,boardBox:is,boardCellsBox:ls,boardIm:cs},ds=({onBrightnessChangeEnd:e})=>{jt();const t=se(),o=Ce(),n=P(i=>i.config.boardFading),l=q(i=>i.config.setBoardFading);return s.jsxs("div",{className:b.boardSettingsModal_slider,style:o?{marginTop:16}:{},children:[s.jsx(Ve,{component:"div",children:z("brightness")}),s.jsx(Me,{id:"board-fading-slider",w:o?"100%":"90%",h:t?"40px":"32px",min:-.35,max:.35,step:.01,onChange:i=>l(i),value:n,label:null,marks:[{value:0,label:""}],style:{marginTop:4},onChangeEnd:e})]})},us=L.memo(ds),Ze=({progress:e,pb:t,iconHidden:o,onClick:n})=>{const l=k==e,i=se();if(l)return null;const m=100/k*e,c=i?"0.1rem":"0.25rem",a=A(U.Success),d=A(U.LightNeutral),r=A(U.Neutral),f=Tt()===k;return s.jsxs("div",{style:{position:"absolute",left:0,top:0,right:0,bottom:0,zIndex:10,padding:c,...t!==void 0?{paddingBottom:t}:{},background:"linear-gradient(rgba(0,0,0,0), rgba(0,0,0,1))",display:"flex",alignItems:"flex-start",justifyContent:"space-between",flexDirection:"column",cursor:"pointer"},onClick:n,children:[s.jsxs("div",{style:{display:"flex",width:"100%",height:"100%",paddingBottom:"0.1rem",alignItems:"flex-end",justifyContent:"space-between"},children:[f?s.jsx(X,{align:"center",justify:"center",children:s.jsx(ie,{color:d,opacity:o?0:.8,size:18})}):s.jsx(_e,{size:(i?34:42)/1.2,thickness:(i?3:5)/1.2,roundCaps:!0,transitionDuration:250,sections:[{value:m,color:a}],styles:{svg:{transform:"scale(1.2) rotate(-90deg)"}},label:s.jsxs(Ve,{fw:700,fz:12,ta:"center",c:d,children:[e,"/",k]})}),s.jsx(Bt,{size:i?18:24,color:r})]}),!o&&!f&&s.jsx("div",{style:{position:"absolute",right:c,top:c},children:s.jsx(ie,{color:d,opacity:.8,size:i?18:24})})]})},ms=({progress:e,onClick:t})=>{const o=se(),n=o?"0.1rem":"0.25rem",l=wt(),i=A(U.LightNeutral);return s.jsxs("div",{style:{padding:n,paddingBottom:`calc(${n} + 0.1rem)`,width:"100%"},children:[s.jsx(Ze,{progress:e,pb:o?35:40,iconHidden:!0,onClick:t}),s.jsx("div",{style:{position:"relative",zIndex:11,width:"100%"},onClick:t,children:s.jsx($e,{size:"xs",w:"100%",fullWidth:!0,rightSection:s.jsx(ie,{color:i,opacity:.8}),children:l?z("openByGem"):z("watchAd")})})]})},xe=({progress:e,onClick:t})=>k==e?null:kt()?s.jsx(ms,{progress:e,onClick:t}):s.jsx(Ze,{progress:e,onClick:t}),gs=({onClick:e,id:t,size:o,mh:n,h:l})=>{const i=Pt(Ft.Primary);return s.jsx($e,{id:t,onClick:e,groupButton:!0,...i,...!!o&&{size:o},...!!l&&{h:l},...!!n&&{mih:n},style:{padding:0},children:s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",flexDirection:"column",padding:"0 1rem"},children:[s.jsx("span",{style:{whiteSpace:"pre-wrap",fontSize:"1.2em",marginBottom:2},children:z("newDesign")}),s.jsx("div",{style:{width:30,aspectRatio:1},children:s.jsx(ie,{size:"100%"})})]})})};L.memo(gs);const Je=(e,t=4)=>{const[o,n]=h.useState(t),[l,i]=h.useTransition(),[m,c]=h.useState(!1);return h.useEffect(()=>{if(m||e.length===o){c(!0);return}i(()=>{n(a=>Math.min(a+t,e.length))})},[e.length,o]),h.useMemo(()=>[m?e:e.slice(0,o),m?0:e.length-o],[o,e,m])},fs=()=>s.jsx(X,{align:"center",justify:"center",style:{flex:"1 1",padding:"5px 10px"},children:s.jsx("div",{className:b.boardFrame,children:s.jsx("div",{className:b.boardBox,children:s.jsx(Ae,{})})})}),hs=e=>{const{type:t,progress:o,renderBoard:n}=e,l=`board-theme-${t}`,i=P(r=>r.config.boardImageManager),m=q(r=>r.config.updateProgressBoardDesign),c=o<k,a=()=>{c&&m(t)};if(n)return s.jsxs("div",{className:b.designContainer,children:[s.jsx(xe,{progress:o,onClick:a}),s.jsx("div",{className:Ue(b.boardFrame,b.designContainer),onClick:a,children:n(t)})]});const d=(()=>{if(Fe(t).type===Nt.Imaged){const u=x=>s.jsx("img",{className:b.boardIm,src:i.getSquareImg({color:x,theme:t}),alt:""});return s.jsxs(s.Fragment,{children:[u(te.White),u(te.Black),u(te.Black),u(te.White)]})}const{w:r,b:f}=Fe(t).colors;return s.jsxs(s.Fragment,{children:[s.jsx("div",{style:{backgroundColor:r}}),s.jsx("div",{style:{backgroundColor:f}}),s.jsx("div",{style:{backgroundColor:f}}),s.jsx("div",{style:{backgroundColor:r}})]})})();return s.jsxs(oe,{w:"100%",onClick:a,className:b.designContainer,children:[s.jsx(xe,{progress:o}),s.jsx("div",{className:b.boardFrame,children:s.jsx("div",{id:l,className:b.boardBox,children:s.jsxs("div",{className:b.boardCellsBox,children:[d,s.jsx(At,{})]})})})]})},ps=L.memo(hs),bs={innerLabel:{alignItems:"center",justifyContent:"center",display:"flex"},root:{alignItems:"center"}},xs=e=>{const{renderBoard:t}=e,o=P(r=>r.config.unlockBoardsDesignProgress),n=P(r=>r.config.allBoardDesigns||[],ze),l=P(r=>r.config.boardTheme),i=q(r=>r.config.setBoardTheme);P(r=>r.platform.premiumChangeTrigger);const m=A(U.Neutral),c=h.useMemo(()=>{const r=le.isPremium()?k:void 0;return n.map(u=>{const x=r??o[u]??0;return{label:s.jsx(ps,{type:u,progress:x,renderBoard:t},`board-${u}`),value:u,disabled:x<k,progress:x<k?0:1}}).sort((u,x)=>x.progress-u.progress)},[n,o]),[a,d]=Je(c);return s.jsxs(s.Fragment,{children:[s.jsx(ye,{className:b.boardSettingsModal_switcher,id:"board-theme-selector",data:a,value:l,onChange:i,styles:{indicator:{backgroundColor:m},...bs}}),s.jsx(X,{align:"center",style:{padding:"0 4px"},wrap:"wrap",w:"100%",children:new Array(Math.max(0,d)).fill(0).map((r,f)=>s.jsx(fs,{},f))})]})},vs=L.memo(xs),Ss=({h:e,w:t,mh:o})=>s.jsx(X,{align:"center",justify:"center",style:{flex:"1 1",padding:"5px 10px"},children:s.jsxs(oe,{w:t,h:e,mih:o,children:[s.jsx("div",{className:b.boardSettingsModal_figureThemeComponent}),s.jsx(Ae,{})]})}),Cs=e=>{const{type:t,progress:o,w:n,h:l,mh:i}=e,m=P(f=>f.config.boardImageManager),c=q(f=>f.config.updateProgressFigureDesign),{shadow:a}=Rt[t]||{},d=o<k,r=()=>{d&&c(t)};return s.jsxs(oe,{w:"100%",onClick:r,className:b.designContainer,children:[s.jsx(xe,{progress:o}),s.jsx(Ut,{id:`figure-theme-${t}`,src:m.getFigureImg({color:te.White,type:Et.Pawn,theme:t}),className:Ue(b.boardSettingsModal_figureThemeComponent,{[b["boardSettingsModal_figureThemeComponent-shadow-right"]]:a===G.Right,[b["boardSettingsModal_figureThemeComponent-shadow-right-bottom"]]:a===G.RightBottom,[b["boardSettingsModal_figureThemeComponent-shadow-left"]]:a===G.Left,[b["boardSettingsModal_figureThemeComponent-shadow-left-bottom"]]:a===G.LeftBottom,[b["boardSettingsModal_figureThemeComponent-shadow-bottom"]]:a===G.Bottom,[b["boardSettingsModal_figureThemeComponent-shadow-center"]]:a===G.Center}),style:{width:n,height:l,minHeight:i}})]})},ys=L.memo(Cs),_s={width:"50%",innerLabel:{alignItems:"center",justifyContent:"center",display:"flex"},root:{alignItems:"center"}},Ms=()=>{const e=se(),t=P(u=>u.config.unlockFiguresDesignProgress),o=P(u=>u.config.allFigureDesigns||[],ze),n=P(u=>u.config.figureTheme);P(u=>u.platform.premiumChangeTrigger);const l=A(U.Neutral),i=q(u=>u.config.setFigureTheme),m=e?"calc(var(--vw, 1vw) * 20)":100,c=e?"calc(var(--vw, 1vw) * 20)":100,a=e?78:100,d=h.useMemo(()=>{const u=le.isPremium()?k:void 0;return o.map(S=>{const y=u??t[S]??0;return{label:s.jsx(ys,{type:S,progress:y,w:m,h:c,mh:a},`figure-${S}`),value:S,disabled:y<k,progress:y<k?0:1}}).sort((S,y)=>y.progress-S.progress)},[o,t]),[r,f]=Je(d,e?4:6);return s.jsxs(s.Fragment,{children:[s.jsx(ye,{className:b.boardSettingsModal_switcher,id:K.modal.boardSettings.pieceSegmentControl.index,data:r,value:n,onChange:i,styles:{..._s,indicator:{backgroundColor:l}}}),s.jsx(X,{style:{padding:"0 4px"},align:"center",wrap:"wrap",w:"100%",children:new Array(Math.max(0,f)).fill(0).map((u,x)=>s.jsx(Ss,{h:c,w:m,mh:a},x))})]})},js=L.memo(Ms),ks=({children:e})=>Ce()?e:s.jsx($t,{justify:"center",children:e}),ws=L.memo(ks),Ts=e=>{const{renderBoard:t}=e,{closeModal:o}=Dt(It.BoardSettingsModal),n=P(a=>a.config.settingsTabValue),l=q(a=>a.config.setSettingsTabValue),i=A(U.Neutral);h.useEffect(()=>{fe&&n===$.Figures&&l($.Boards)},[n]),h.useEffect(()=>(le.gameplayPause(),()=>{le.gameplayContinue()}),[]);const m=se(),c=Ce();return s.jsx(zt,{id:K.modal.boardSettings.index,idCloseButton:K.modal.boardSettings.closeButton,fullScreen:m,visible:!0,onClose:o,titleCentered:!0,title:s.jsxs(X,{align:"center",direction:"column",gap:4,children:[z("boardSettings"),s.jsx(Vt,{onlyGems:!0})]}),size:c?void 0:800,children:s.jsx(ws,{children:s.jsxs(s.Fragment,{children:[!fe&&s.jsx(ye,{className:b.boardSettingsModal_segmentedControl,id:K.modal.boardSettings.designTypeSelector.index,data:[{label:s.jsx("div",{id:K.modal.boardSettings.designTypeSelector.figuresButton,children:z("figures")}),value:$.Figures},{label:s.jsx("div",{id:K.modal.boardSettings.designTypeSelector.boardsButton,children:z("boards")}),value:$.Boards}],value:n,onChange:l,styles:()=>({indicator:{backgroundColor:i}})}),fe?null:s.jsxs(s.Fragment,{children:[n===$.Figures&&s.jsx(js,{},"FigureSwitcher"),n===$.Boards&&s.jsx(us,{onBrightnessChangeEnd:a=>Lt.trackChangeBoardFading(a)})]}),n===$.Boards&&s.jsx(vs,{renderBoard:t})]})})})},Is=L.memo(Ts);export{Is as default};
