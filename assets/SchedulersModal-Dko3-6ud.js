import{R as M,bk as C,W as b,T as D,a as g,j as e,I as T,K as h,aC as R,ay as u,bl as G,dW as W,bZ as I,d5 as v,aF as P,aG as A,aH as F,r as f,l as V,bj as q,ax as H}from"./main-Cz_EDjso.js";import{M as O}from"./ModalExternal-Bc4p8-uQ.js";import{G as _}from"./analytics-C4g1w3Ww.js";import{B as E}from"./Badge-n1kUSIcG.js";import"./workers-0KObbvUQ.js";import"./ScrollArea-D_4_3NIY.js";const K=({reward:n,withoutSymbol:r=!1})=>{const a={[v.ADD]:"+",[v.REMOVE]:"-",[v.SET]:""},m=D(),y=g(s=>s.config.windowSize.windowWidth<=450),p=g(s=>s.config.windowSize.windowWidth<=350),t=n.mutations[0],c=r?t==null?void 0:t.value:e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{marginRight:3},children:a[t==null?void 0:t.action]}),t==null?void 0:t.value]});let o={w:90,h:75};return m&&(o={w:70,h:55},y&&(o={w:60,h:50},p&&(o={w:50,h:40}))),e.jsxs(h,{gap:2,align:"center",direction:"column",justify:"space-between",h:"100%",children:[e.jsx(h,{align:"center",justify:"center",w:o.w,h:o.h,children:e.jsx(P,{src:n.icon,style:{filter:"drop-shadow(2px 2px 4px rgb(27, 32, 29))"}})}),e.jsx(R,{fw:"bold",fz:20,children:c})]})},N=n=>{const{width:r,day:a,today:m,next:y}=n,p=C(b.Success),t=a.isDayReached&&!a.isDayClaimed,c=C(b.Success),o=C(b.Neutral),s=D(),i=g(w=>w.config.windowSize.windowWidth<=350),x=()=>{t&&(window.gp.schedulers.claimDay(W(),a.day),I.trackGPRequest(_.SchedulersClaimDay))},d=i?4:"xs",l=s?24:34;return e.jsx(T,{shadow:"sm",padding:"sm",radius:"md",miw:r,maw:r,onClick:t?x:void 0,style:{opacity:a.isDayReached?1:"0.7",position:"relative",cursor:t?"pointer":"default"},children:e.jsxs(h,{direction:s?"row":"column",align:"center",gap:s?d:0,justify:s?"space-between":void 0,children:[e.jsxs(R,{mb:s?0:"xs",fw:"500",style:{whiteSpace:"nowrap"},children:[u("Day")," ",a.day]}),e.jsx(h,{align:"center",justify:"center",gap:d,children:a.bonuses.map((w,j)=>e.jsx(K,{reward:w},j))}),a.isDayClaimed?e.jsx("div",{style:s?{}:{position:"absolute",right:"0.5rem",top:"0.5rem",width:l,height:l},children:e.jsx(G,{size:l,color:p})}):s?e.jsx("div",{style:{width:l}}):null,m&&e.jsx("div",{style:{position:"absolute",left:0,top:-4},children:e.jsx(E,{color:c,radius:"xs",style:{borderBottomRightRadius:"var(--paper-radius)"},children:u("today")})}),y&&e.jsx("div",{style:{position:"absolute",left:0,top:-4},children:e.jsx(E,{color:o,radius:"xs",style:{borderBottomRightRadius:"var(--paper-radius)"},children:u("tomorrow")})})]})})},U=M.memo(N),Y=()=>{const{closeModal:n}=A(F.SchedulersModal),r=D(),[a,m]=f.useState([]),[y,p]=f.useState(0),t=g(s=>s.config.windowSize.windowWidth<=630);f.useEffect(()=>{const s=setInterval(()=>{p(i=>i+1)},300);return()=>clearInterval(s)},[]),f.useEffect(()=>{const s=W(),{scheduler:i}=window.gp.schedulers.getScheduler(s);if(!i)return;const x=[];for(let d=1;d<=i.days;d++){const l=window.gp.schedulers.getSchedulerDay(s,d),{isDayReached:w,isDayClaimed:j,bonuses:k,day:z}=l;x.push({isDayReached:w,isDayClaimed:j,bonuses:k.map(S=>window.gp.rewards.list.find(B=>B.id===S.id)).filter(S=>!!S),day:z})}m(x)},[y]);let c=-1;a.forEach((s,i)=>{s.isDayReached&&s.isDayClaimed&&(c=i)});const o=r?t?"calc(100% - var(--mantine-spacing-xs))":"calc(50% - var(--mantine-spacing-xs))":"calc(33% - var(--mantine-spacing-xs))";return e.jsx(O,{fullScreen:r,visible:!0,id:V.modal.payments.index,withCloseButton:!0,onClose:n,title:u("everyDayBonus"),titleCentered:!0,size:"xl",children:e.jsxs(q,{justify:"center",gap:"xs",onlyHorOffset:!0,children:[e.jsx(h,{direction:"row",gap:"sm",justify:"center",w:"100%",wrap:"wrap",p:r?0:5,children:a.map((s,i)=>e.jsx(U,{width:o,day:s,today:c===i,next:c+1===i},s.day))}),e.jsxs(h,{direction:"column",gap:"sm",align:"center",children:[e.jsx(R,{ta:"center",children:u("runGameEveryDayAndGetBonus")}),e.jsx(H,{onClick:n,children:u("thankYou")})]})]})})},ee=M.memo(Y);export{ee as default};
