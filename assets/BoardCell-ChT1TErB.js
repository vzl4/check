const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BoardCellFigureMoves-CAReUhM0.css"])))=>i.map(i=>d[i]);
import{g as W,r as u,i as w,D as J,R as j,u as N,a as m,f as K,b as R,c as L,d as Q,j as g,e as P,S as O,G as X,p as Z,h as ee,_ as te,k as re,B as A,l as ne}from"./main-Cz_EDjso.js";import{B as oe}from"./BoardCellFading-DcyL0ksJ.js";import"./analytics-C4g1w3Ww.js";import"./workers-0KObbvUQ.js";var x,B;function ie(){return B||(B=1,x=function r(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,o,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(o=n;o--!==0;)if(!r(e[o],t[o]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(o=n;o--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[o]))return!1;for(o=n;o--!==0;){var a=i[o];if(!r(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}),x}var se=ie();const ae=W(se),T=typeof window<"u"?u.useLayoutEffect:u.useEffect;function ce(r,e,t){const[n,o]=u.useState(()=>e(r)),i=u.useCallback(()=>{const a=e(r);ae(n,a)||(o(a),t&&t())},[n,r,t]);return T(i),[n,i]}function ue(r,e,t){const[n,o]=ce(r,e,t);return T(function(){const a=r.getHandlerId();if(a!=null)return r.subscribeToStateChange(o,{handlerIds:[a]})},[r,o]),n}function U(r,e,t){return ue(e,r||(()=>({})),()=>t.reconnect())}function Y(r,e){const t=[...e||[]];return e==null&&typeof r!="function"&&t.push(r),u.useMemo(()=>typeof r=="function"?r():r,t)}function le(r){return u.useMemo(()=>r.hooks.dragSource(),[r])}function ge(r){return u.useMemo(()=>r.hooks.dragPreview(),[r])}let F=!1,E=!1;class de{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){w(!F,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return F=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{F=!1}}isDragging(){if(!this.sourceId)return!1;w(!E,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return E=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{E=!1}}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,t){return this.internalMonitor.isOverTarget(e,t)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let q=!1;class he{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}canDrop(){if(!this.targetId)return!1;w(!q,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return q=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{q=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function fe(r,e,t){const n=t.getRegistry(),o=n.addTarget(r,e);return[o,()=>n.removeTarget(o)]}function pe(r,e,t){const n=t.getRegistry(),o=n.addSource(r,e);return[o,()=>n.removeSource(o)]}function H(r,e,t,n){let o;if(o!==void 0)return!!o;if(r===e)return!0;if(typeof r!="object"||!r||typeof e!="object"||!e)return!1;const i=Object.keys(r),a=Object.keys(e);if(i.length!==a.length)return!1;const s=Object.prototype.hasOwnProperty.bind(e);for(let c=0;c<i.length;c++){const l=i[c];if(!s(l))return!1;const d=r[l],p=e[l];if(o=void 0,o===!1||o===void 0&&d!==p)return!1}return!0}function k(r){return r!==null&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function me(r){if(typeof r.type=="string")return;const e=r.type.displayName||r.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function ve(r){return(e=null,t=null)=>{if(!u.isValidElement(e)){const i=e;return r(i,t),i}const n=e;return me(n),De(n,t?i=>r(i,t):r)}}function z(r){const e={};return Object.keys(r).forEach(t=>{const n=r[t];if(t.endsWith("Ref"))e[t]=r[t];else{const o=ve(n);e[t]=()=>o}}),e}function $(r,e){typeof r=="function"?r(e):r.current=e}function De(r,e){const t=r.ref;return w(typeof t!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),t?u.cloneElement(r,{ref:n=>{$(t,n),$(e,n)}}):u.cloneElement(r,{ref:e})}class be{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return t&&this.disconnectDragSource(),this.handlerId?e?(t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),t):(this.lastConnectedDragSource=e,t):t}reconnectDragPreview(e=!1){const t=this.dragPreview,n=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!t){this.lastConnectedDragPreview=t;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!H(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!H(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=z({dragSource:(t,n)=>{this.clearDragSource(),this.dragSourceOptions=n||null,k(t)?this.dragSourceRef=t:this.dragSourceNode=t,this.reconnectDragSource()},dragPreview:(t,n)=>{this.clearDragPreview(),this.dragPreviewOptions=n||null,k(t)?this.dragPreviewRef=t:this.dragPreviewNode=t,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class Ce{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const t=this.dropTarget;if(this.handlerId){if(!t){this.lastConnectedDropTarget=t;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!H(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=z({dropTarget:(t,n)=>{this.clearDropTarget(),this.dropTargetOptions=n,k(t)?this.dropTargetRef=t:this.dropTargetNode=t,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function M(){const{dragDropManager:r}=u.useContext(J);return w(r!=null,"Expected drag drop context"),r}function Ie(r,e){const t=M(),n=u.useMemo(()=>new be(t.getBackend()),[t]);return T(()=>(n.dragSourceOptions=r||null,n.reconnect(),()=>n.disconnectDragSource()),[n,r]),T(()=>(n.dragPreviewOptions=e||null,n.reconnect(),()=>n.disconnectDragPreview()),[n,e]),n}function we(){const r=M();return u.useMemo(()=>new de(r),[r])}class ye{beginDrag(){const e=this.spec,t=this.monitor;let n=null;return typeof e.item=="object"?n=e.item:typeof e.item=="function"?n=e.item(t):n={},n??null}canDrag(){const e=this.spec,t=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(t):!0}isDragging(e,t){const n=this.spec,o=this.monitor,{isDragging:i}=n;return i?i(o):t===e.getSourceId()}endDrag(){const e=this.spec,t=this.monitor,n=this.connector,{end:o}=e;o&&o(t.getItem(),t),n.reconnect()}constructor(e,t,n){this.spec=e,this.monitor=t,this.connector=n}}function Te(r,e,t){const n=u.useMemo(()=>new ye(r,e,t),[e,t]);return u.useEffect(()=>{n.spec=r},[r]),n}function Se(r){return u.useMemo(()=>{const e=r.type;return w(e!=null,"spec.type must be defined"),e},[r])}function Oe(r,e,t){const n=M(),o=Te(r,e,t),i=Se(r);T(function(){if(i!=null){const[s,c]=pe(i,o,n);return e.receiveHandlerId(s),t.receiveHandlerId(s),c}},[n,e,t,o,i])}function Me(r,e){const t=Y(r,e);w(!t.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const n=we(),o=Ie(t.options,t.previewOptions);return Oe(t,n,o),[U(t.collect,n,o),le(o),ge(o)]}function _e(r){return u.useMemo(()=>r.hooks.dropTarget(),[r])}function Pe(r){const e=M(),t=u.useMemo(()=>new Ce(e.getBackend()),[e]);return T(()=>(t.dropTargetOptions=r||null,t.reconnect(),()=>t.disconnectDropTarget()),[r]),t}function Re(){const r=M();return u.useMemo(()=>new he(r),[r])}function xe(r){const{accept:e}=r;return u.useMemo(()=>(w(r.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class Fe{canDrop(){const e=this.spec,t=this.monitor;return e.canDrop?e.canDrop(t.getItem(),t):!0}hover(){const e=this.spec,t=this.monitor;e.hover&&e.hover(t.getItem(),t)}drop(){const e=this.spec,t=this.monitor;if(e.drop)return e.drop(t.getItem(),t)}constructor(e,t){this.spec=e,this.monitor=t}}function Ee(r,e){const t=u.useMemo(()=>new Fe(r,e),[e]);return u.useEffect(()=>{t.spec=r},[r]),t}function qe(r,e,t){const n=M(),o=Ee(r,e),i=xe(r);T(function(){const[s,c]=fe(i,o,n);return e.receiveHandlerId(s),t.receiveHandlerId(s),c},[n,e,o,t,i.map(a=>a.toString()).join("|")])}function He(r,e){const t=Y(r,e),n=Re(),o=Pe(t.options);return qe(t,n,o),[U(t.collect,n,o),_e(o)]}const ke="_figure_1puqo_1",je="_figure__rotated_1puqo_10",h={figure:ke,figure__rotated:je,"figure-shadow-right":"_figure-shadow-right_1puqo_13","figure-shadow-right-bottom":"_figure-shadow-right-bottom_1puqo_23","figure-shadow-left":"_figure-shadow-left_1puqo_33","figure-shadow-left-bottom":"_figure-shadow-left-bottom_1puqo_43","figure-shadow-bottom":"_figure-shadow-bottom_1puqo_53","figure-shadow-center":"_figure-shadow-center_1puqo_63","figure-frame":"_figure-frame_1puqo_67","figure-frame-container":"_figure-frame-container_1puqo_82","figure-frame-container-interactive":"_figure-frame-container-interactive_1puqo_94","figure-frame-container-arrowFrom":"_figure-frame-container-arrowFrom_1puqo_97","figure-frame-container-hightlight-visible":"_figure-frame-container-hightlight-visible_1puqo_100","figure-frame-container-hightlight-hidden":"_figure-frame-container-hightlight-hidden_1puqo_118"};te(()=>Promise.resolve({}),__vite__mapDeps([0]),import.meta.url);const Ne={x:0,y:0},Ae=(r,e,t)=>{const n=m(c=>{const l=c.app.gameType,d=c.board.myColor,p=c.board.gameEngine.turn(),v=c.board.historyOffset!==null;return(p?X.Together===l?p:p===d?d:null:null)===(e==null?void 0:e.color)&&!v})&&!!e,[{isDragging:o,position:i},a]=Me(()=>({type:G,collect:c=>{var d;const l=((d=c.getItem())==null?void 0:d.square)===r;return{isDragging:l&&c.isDragging(),position:l&&c.isDragging()?c.getDifferenceFromInitialOffset():Ne}},canDrag:n,item:{square:r}}),[n,r]);u.useEffect(()=>{o&&(t==null||t(r,e))},[t,o,r,e]);const s={x:(i==null?void 0:i.x)||0,y:(i==null?void 0:i.y)||0};return{isDragging:o,position:s,dragRef:a}},G="figure",Be=(r,e)=>{const t=m(a=>a.board.gameEngine.turn()),n=m(a=>a.board.myColor),{isCustomBoard:o}=N(),i=m(a=>{const s=a.board.allAvailableFigures;return!s||!s.length?null:s.includes(e)});return o||n!==r||t!==r?null:i},$e=({square:r,figureColor:e,children:t,className:n,style:o,id:i})=>{const a=Be(e,r),s=m(c=>c.board.gameEngine.turn());return g.jsx("div",{id:i,style:o,className:P(n,{[h["figure-frame-container-interactive"]]:s===e,[h["figure-frame-container-hightlight-hidden"]]:a===!1,[h["figure-frame-container-hightlight-visible"]]:a===!0}),children:t})},Ue=j.memo($e),Ye=r=>{const{id:e,square:t,figure:n,click:o,isArrowFrom:i}=r,{isRotated:a}=N(),{shadow:s,backgroundImage:c}=m(f=>({shadow:K[f.config.figureTheme].shadow,backgroundImage:`url(${f.config.boardImageManager.getFigureImg({...n,theme:f.config.figureTheme})})`}),R),l=m(f=>f.config.soundEnable),d=m(f=>{var _;const C=f.board.lastMove;return!!C&&C.to===t&&(((_=C.captures)==null?void 0:_.length)||C.captured)}),p=L(t),v=Q(t),{isDragging:D,position:b,dragRef:S}=Ae(t,n,o),y=()=>{l&&(d?Z(0):ee(0))};return g.jsx("div",{className:h["figure-frame"],style:v,onAnimationEnd:v?y:void 0,children:g.jsx(Ue,{id:e,figureColor:n.color,square:t,style:p,className:P(h["figure-frame-container"],{[h["figure-frame-container-arrowFrom"]]:i}),children:g.jsx("span",{ref:S,className:P(h.figure,{[h.figure__rotated]:a,[h["figure-shadow-right"]]:s===O.Right,[h["figure-shadow-right-bottom"]]:s===O.RightBottom,[h["figure-shadow-left"]]:s===O.Left,[h["figure-shadow-left-bottom"]]:s===O.LeftBottom,[h["figure-shadow-bottom"]]:s===O.Bottom,[h["figure-shadow-center"]]:s===O.Center}),style:{transform:`${a?"rotate(0.5turn) ":""}translate(${b.x}px, ${b.y}px)`,backgroundImage:c,...D&&{pointerEvents:"none",zIndex:10}}})})})},ze=j.memo(Ye),Ge="_cell_1bk9t_1",Ve="_cellIndicator_1bk9t_51",I={cell:Ge,"cell-possibleMoveTo":"_cell-possibleMoveTo_1bk9t_13","cell-highLayer":"_cell-highLayer_1bk9t_16","cell-container":"_cell-container_1bk9t_19","cell-check":"_cell-check_1bk9t_30","cell-possibleCapture":"_cell-possibleCapture_1bk9t_33","cell-availablePoint":"_cell-availablePoint_1bk9t_40",cellIndicator:Ve},We=r=>e=>re(e.board.currGameEngine.turn(),e.board.availableMoves||[],r),Je=r=>e=>({isPossibleCapture:(e.board.availableMoves||[]).some(t=>{var n;return t.includes("x")&&((n=t.split("x")[1])==null?void 0:n.includes(r))}),isArrowFrom:e.canvas.arrows.some(t=>t.from===r)||e.canvas.arrowsBeforeClear.some(t=>t.from===r)}),Ke=({children:r,boardImageManager:e,cell:t,themeConfig:n,boardTheme:o,isCustomBoard:i})=>{const{type:a,colors:s}=n,{isSelected:c,isMoveTo:l,isMoveFrom:d}=m(b=>{var S,y,f;return{isSelected:((S=b.board.selectedCell)==null?void 0:S.square)===t.square&&!i,isMoveTo:((y=b.board.lastMove)==null?void 0:y.to)===t.square&&!i,isMoveFrom:((f=b.board.lastMove)==null?void 0:f.from)===t.square&&!i}},R),p={backgroundColor:s[t.color],...a===A.Imaged&&{backgroundImage:`url(${e.getSquareImg({color:t.color,theme:o})})`}};let v;c&&(v=20),l&&(v=9);let D;return l&&(D=s.moveTo),d&&(D=s.moveFrom),c&&(D=s.selected),g.jsxs("div",{className:I["cell-container"],style:{zIndex:v,...p},children:[g.jsx("div",{className:I.cellIndicator,style:{backgroundColor:D,opacity:a===A.Imaged?.5:void 0}}),r,g.jsx(oe,{})]})},Le=({id:r,cell:e,onCLick:t,isArrowFrom:n,isCheck:o,isPossibleMoveTo:i,children:a})=>{const[s,c]=He({accept:G,drop:()=>t==null?void 0:t(e.square,void 0,!0)},[t]);return g.jsx("div",{id:r,ref:c,className:P(I.cell,{[I["cell-highLayer"]]:n,[I["cell-check"]]:o,[I["cell-possibleMoveTo"]]:i}),onClick:()=>t==null?void 0:t(e.square,e.figure),children:a},"cell-content")},Qe=({isPossibleMoveTo:r,isPossibleCapture:e,cell:t,onCLick:n,isArrowFrom:o,colors:i})=>{var c;const a=!t.figure&&((c=t.prevFigure)==null?void 0:c.isCaptured);let s;return t.figure&&(s=t.figure),a&&(s=t.prevFigure),g.jsxs(g.Fragment,{children:[r&&g.jsx("div",{className:I["cell-availablePoint"],style:{backgroundColor:i.possibleMoveTo}},"cell-available-point"),e&&g.jsx("div",{className:I["cell-possibleCapture"],style:{borderColor:i.possibleCapture}},"cell-possible-capture"),s&&g.jsx(ze,{id:`${ne.gameBoard.dynamic.figure[s.color??""]}-${s.type}-${t.square}`,square:t.square,figure:s,click:n,isArrowFrom:o})]})},Xe=r=>{const{cell:e,id:t,isCheck:n,playerTryMove:o,boardImageManager:i,boardTheme:a,themeConfig:s,isHistoryMode:c}=r,{isCustomBoard:l}=N(),d=u.useCallback((f,C,_=!1)=>{if(c)return;const V=C?{square:f,type:C.type,color:C.color}:null;o&&o({square:f,cell:V,dropped:_})},[o,c]),p=m(We(e.square)),{isPossibleCapture:v,isArrowFrom:D}=m(Je(e.square),R),b=p&&!l,S=v&&!l,y=D&&!l;return g.jsx(Ke,{boardImageManager:i,cell:e,themeConfig:s,boardTheme:a,isCustomBoard:l,children:g.jsx(Le,{id:t,cell:e,onCLick:d,isArrowFrom:y,isCheck:n,isPossibleMoveTo:b,children:g.jsx(Qe,{isPossibleMoveTo:b,isPossibleCapture:S,cell:e,onCLick:d,isArrowFrom:y,colors:s.colors})})})},nt=j.memo(Xe,R);export{nt as default};
