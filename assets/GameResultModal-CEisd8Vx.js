import{U as o,T as z,bt as F,aM as w,a as d,G as P,bP as I,j as e,R as b,cx as k,l as s,cy as U,cz as D,cA as H,bA as L,by as N,cB as E,cC as O,cD as W,cE as K,K as l,cF as V,cG as $,H as q,aA as J,ay as v,aC as Q,ax as X,aG as Y,aH as Z,cm as _,cH as ee,cI as te,c8 as ae,c9 as se,bu as C,ch as oe,bk as le}from"./main-Cz_EDjso.js";import{M as ne}from"./ModalExternal-Bc4p8-uQ.js";import{g as re,R as ce,G as ie}from"./GameResultIcon-DOKH6OTH.js";import"./analytics-C4g1w3Ww.js";import{D as ue}from"./Divider-LWlDoTpr.js";import"./workers-0KObbvUQ.js";import"./ScrollArea-D_4_3NIY.js";import"./CustomPopover-BiKCfJi1.js";import"./leaderboard.services.ui-Cy1UHfbc.js";const de=R=>{const{closeModal:m,closeModalHandlerAfterAds:n,onGameplayButtonClick:p}=R,r=o(t=>t.platform.login),f=o(t=>t.config.setLeaderboardSelectedTab),G=o(t=>t.app.analyzeBoard),M=o(t=>t.session.setPlayedFromAnalyze),c=o(t=>t.board.setIsShowComputerGaveUpModal),j=o(t=>t.board.setIsComputerGaveUp),g=z(),B=F(w.Primary),S=d(t=>{var u,x;return!t.platform.isAuth&&t.app.gameType!==P.Together&&!I().withOutAuth&&((x=(u=window.gp)==null?void 0:u.platform)==null?void 0:x.hasIntegratedAuth)}),T=()=>{r({force:!0,showModal:!1,saveGuestDataState:!0})},A=()=>{m(),c(!1),j(!1),M(!1)},i=e.jsxs(b.Fragment,{children:[e.jsx(k,{onClick:()=>{m(),G()},id:s.modal.gameResult.button.startAnalyze}),e.jsx(U,{onUndo:t=>t&&A(),id:s.modal.gameResult.button.undoFatalMove}),e.jsx(D,{onClick:n,id:s.modal.gameResult.button.startRematch}),e.jsx(H,{onClick:n,id:s.modal.gameResult.button.openNewGameModal}),e.jsx(L,{place:N.GameResultButton,id:s.modal.gameResult.button.openPaymentsModal})]},"game-result-modal-left-buttons"),h=e.jsxs(b.Fragment,{children:[e.jsx(E,{buttonType:w.Outline,onClick:()=>{f(O.WithComputerScore),p()},id:s.modal.gameResult.button.openLeadersBoardModal}),e.jsx(W,{place:K.ModalGameResult})]},"game-result-modal-chat-and-leaders-buttons"),y=e.jsxs(b.Fragment,{children:[g?e.jsx(l,{w:"100%",align:"stretch",gap:"sm",children:h}):h,e.jsx(V,{place:$.ModalGameResult}),e.jsx(q,{onClick:n,title:v("mainMenu"),iconSize:J.md,id:s.modal.gameResult.button.openMainScreen,defaultButton:!0}),S&&e.jsxs(e.Fragment,{children:[e.jsx(ue,{size:2}),e.jsx(Q,{component:"div",ta:"center",size:"sm",lh:1,mb:2,children:v("logInToSaveScore")}),e.jsx(X,{id:s.modal.gameResult.button.login,onClick:T,...B,children:v("login")})]})]},"game-result-modal-right-buttons");return e.jsx(e.Fragment,{children:g?e.jsxs(l,{direction:"column",gap:"sm",children:[i,y]}):e.jsxs(l,{direction:"row",align:"start",gap:"sm",children:[e.jsx(l,{style:{flex:1},direction:"column",align:"stretch",gap:"sm",children:i}),e.jsx(l,{style:{flex:1},direction:"column",align:"stretch",gap:"sm",children:y})]})})},me=R=>{const{getGameResultIconData:m,getGameResultTitle:n}=R,{closeModal:p}=Y(Z.GameResultModal),r=d(a=>a.app.gameResult),f=d(a=>a.session.gameCompleteReason),G=d(a=>a.app.gameType),M=d(a=>a.session.playedFromAnalyze),c=_(),j=ee(),g=z(),B=te(720),S=o(a=>a.session.setPlayedFromAnalyze),T=o(a=>a.board.setIsShowComputerGaveUpModal),A=o(a=>a.board.setIsComputerGaveUp),i=ae(se.GameResultModalButtonClick),h=c?j||!r?C.Neutral2:r===oe.Defeat?C.Reject3:C.Success3:C.Neutral2,y=le(h),t=()=>i().then(()=>{p(),T(!1),A(!1),S(!1)}),u={gameResult:r,gameCompletionReason:f,isNotCancelledMatch:c},x=re(u)??n(u);return e.jsx(ne,{fullScreen:!1,visible:!0,id:s.modal.gameResult.index,idCloseButton:s.modal.gameResult.button.close,size:"auto",miw:320,onClose:t,title:e.jsxs(l,{gap:8,children:[x,e.jsx(ie,{height:24,width:24,getGameResultIconData:m})]}),titleCentered:!0,titlePadding:"2rem",titleSize:1.5,withCloseButton:!0,backgroundColor:"rgba(26, 27, 30, 0.75)",titleColor:y,headerStyles:{backgroundColor:"transparent"},innerStyles:B,scrollAreaContentEnabled:!0,children:e.jsxs(l,{gap:"sm",align:"stretch",justify:"center",direction:"column",style:{maxWidth:g?"350px":void 0,margin:"0 auto",padding:"2px"},children:[G!==P.Together&&c&&!M&&e.jsx(ce,{}),e.jsx(de,{closeModal:p,closeModalHandlerAfterAds:t,onGameplayButtonClick:i})]})})},Ge=b.memo(me);export{Ge as default};
