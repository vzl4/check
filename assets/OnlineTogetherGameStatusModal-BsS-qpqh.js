import{r as x,di as je,dj as Ie,R as se,dk as we,x as z,y as k,dl as Ae,b0 as Pe,j as e,z as A,dm as Te,aT as ie,dn as ke,dp as Fe,b1 as _e,bG as Oe,aY as ae,dq as re,a_ as ce,bg as le,a$ as de,dr as Re,ds as Y,bL as ze,dt as J,a as w,C as Me,bk as L,W as N,bj as Ge,bw as Le,ay as y,bP as X,du as Q,d2 as ue,dv as Ne,K as j,aC as O,V as $e,l as E,X as De,bl as Be,aA as Z,dw as Ee,d3 as qe,U as R,dx as He,cs as We,ax as Ke,dy as ee,aG as Ue,aH as Ve,M as te,bo as Ye,bp as Je,J as Xe}from"./main-Cz_EDjso.js";import{M as Qe}from"./ModalExternal-Bc4p8-uQ.js";import{F as Ze}from"./FriendGameSettings-B9CEgOEU.js";import{S as et}from"./Switch-kkRJNaF4.js";import"./analytics-C4g1w3Ww.js";import"./workers-0KObbvUQ.js";import"./ScrollArea-D_4_3NIY.js";import"./GameSettings-BjRaJEZ_.js";import"./Background-CzE9_nId.js";import"./RewardPaymentEl-DJaO0Moh.js";import"./PremiumModal-BNGw1tw5.js";import"./PremiumTime-DnpUiTt6.js";import"./HintsSwitch-Ci2QMKJK.js";function ne(t,s){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(s);return`${t}-${n}`}}function tt(t){if(!t||typeof t=="string")return 0;const s=t/36;return Math.round((4+15*s**.25+s/5)*10)}function B(t){return t!=null&&t.current?t.current.scrollHeight:"auto"}const _=typeof window<"u"&&window.requestAnimationFrame,oe=0,nt=t=>({height:0,overflow:"hidden",...t?{}:{display:"none"}});function ot({transitionDuration:t,transitionTimingFunction:s="ease",onTransitionEnd:n=()=>{},opened:o,keepMounted:d=!1}){const i=x.useRef(null),u=nt(d),[l,r]=x.useState(o?{}:u),m=c=>{we.flushSync(()=>r(c))},a=c=>{m(p=>({...p,...c}))};function v(c){const p=t||tt(c);return{transition:`height ${p}ms ${s}, opacity ${p}ms ${s}`}}je(()=>{typeof _=="function"&&_(o?()=>{a({willChange:"height",display:"block",overflow:"hidden"}),_(()=>{const c=B(i);a({...v(c),height:c})})}:()=>{const c=B(i);a({...v(c),willChange:"height",height:c}),_(()=>a({height:oe,overflow:"hidden"}))})},[o]);const g=c=>{if(!(c.target!==i.current||c.propertyName!=="height"))if(o){const p=B(i);p===l.height?m({}):a({height:p}),n()}else l.height===oe&&(m(u),n())};function b({style:c={},refKey:p="ref",...h}={}){const I=h[p],P={"aria-hidden":!o,...h,[p]:Ie(i,I),onTransitionEnd:g,style:{boxSizing:"border-box",...c,...l}};return se.version.startsWith("18")?o||(P.inert=""):P.inert=!o,P}return b}const st={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},q=z((t,s)=>{const{children:n,in:o,transitionDuration:d,transitionTimingFunction:i,style:u,onTransitionEnd:l,animateOpacity:r,keepMounted:m,...a}=k("Collapse",st,t),v=Ae(),g=Pe(),c=(v.respectReducedMotion?g:!1)?0:d,p=ot({opened:o,transitionDuration:c,transitionTimingFunction:i,onTransitionEnd:l,keepMounted:m});return c===0?o?e.jsx(A,{...a,children:n}):null:e.jsx(A,{...p({style:{opacity:o||!r?1:0,transition:r?`opacity ${c}ms ${i}`:"none",...Te(u,v)},ref:s,...a}),children:n})});q.displayName="@mantine/core/Collapse";const[it,H]=ie("Accordion component was not found in the tree"),[at,me]=ie("Accordion.Item component was not found in the tree");var M={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const W=z((t,s)=>{const{classNames:n,className:o,style:d,styles:i,vars:u,chevron:l,icon:r,onClick:m,onKeyDown:a,children:v,disabled:g,mod:b,...c}=k("AccordionControl",null,t),{value:p}=me(),h=H(),I=h.isItemActive(p),P=typeof h.order=="number",$=`h${h.order}`,F=e.jsxs(ke,{...c,...h.getStyles("control",{className:o,classNames:n,style:d,styles:i,variant:h.variant}),unstyled:h.unstyled,mod:["accordion-control",{active:I,"chevron-position":h.chevronPosition,disabled:g},b],ref:s,onClick:G=>{m==null||m(G),h.onChange(p)},type:"button",disabled:g,"aria-expanded":I,"aria-controls":h.getRegionId(p),id:h.getControlId(p),onKeyDown:Fe({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:h.loop,orientation:"vertical",onKeyDown:a}),children:[e.jsx(A,{component:"span",mod:{rotate:!h.disableChevronRotation&&I,position:h.chevronPosition},...h.getStyles("chevron",{classNames:n,styles:i}),children:l||h.chevron}),e.jsx("span",{...h.getStyles("label",{classNames:n,styles:i}),children:v}),r&&e.jsx(A,{component:"span",mod:{"chevron-position":h.chevronPosition},...h.getStyles("icon",{classNames:n,styles:i}),children:r})]});return P?e.jsx($,{...h.getStyles("itemTitle",{classNames:n,styles:i}),children:F}):F});W.displayName="@mantine/core/AccordionControl";W.classes=M;const K=z((t,s)=>{const{classNames:n,className:o,style:d,styles:i,vars:u,value:l,mod:r,...m}=k("AccordionItem",null,t),a=H();return e.jsx(at,{value:{value:l},children:e.jsx(A,{ref:s,mod:[{active:a.isItemActive(l)},r],...a.getStyles("item",{className:o,classNames:n,styles:i,style:d,variant:a.variant}),...m})})});K.displayName="@mantine/core/AccordionItem";K.classes=M;const U=z((t,s)=>{const{classNames:n,className:o,style:d,styles:i,vars:u,children:l,...r}=k("AccordionPanel",null,t),{value:m}=me(),a=H();return e.jsx(q,{ref:s,...a.getStyles("panel",{className:o,classNames:n,style:d,styles:i}),...r,in:a.isItemActive(m),transitionDuration:a.transitionDuration??200,role:"region",id:a.getRegionId(m),"aria-labelledby":a.getControlId(m),children:e.jsx("div",{...a.getStyles("content",{classNames:n,styles:i}),children:l})})});U.displayName="@mantine/core/AccordionPanel";U.classes=M;const rt={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevronSize:"auto",chevronIconSize:16},ct=ce((t,{transitionDuration:s,chevronSize:n,radius:o})=>({root:{"--accordion-transition-duration":s===void 0?void 0:`${s}ms`,"--accordion-chevron-size":n===void 0?void 0:de(n),"--accordion-radius":o===void 0?void 0:le(o)}}));function f(t){const s=k("Accordion",rt,t),{classNames:n,className:o,style:d,styles:i,unstyled:u,vars:l,children:r,multiple:m,value:a,defaultValue:v,onChange:g,id:b,loop:c,transitionDuration:p,disableChevronRotation:h,chevronPosition:I,chevronSize:P,order:$,chevron:F,variant:G,radius:ft,chevronIconSize:ge,attributes:fe,...ye}=s,D=_e(b),[S,ve]=Oe({value:a,defaultValue:v,finalValue:m?[]:null,onChange:g}),xe=C=>Array.isArray(S)?S.includes(C):C===S,be=C=>{const Se=Array.isArray(S)?S.includes(C)?S.filter(Ce=>Ce!==C):[...S,C]:C===S?null:C;ve(Se)},V=ae({name:"Accordion",classes:M,props:s,className:o,style:d,classNames:n,styles:i,unstyled:u,attributes:fe,vars:l,varsResolver:ct});return e.jsx(it,{value:{isItemActive:xe,onChange:be,getControlId:ne(`${D}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:ne(`${D}-panel`,"Accordion.Item component was rendered with invalid value or without value"),chevron:F===null?null:F||e.jsx(re,{size:ge}),transitionDuration:p,disableChevronRotation:h,chevronPosition:I,order:$,loop:c,getStyles:V,variant:G,unstyled:u},children:e.jsx(A,{...V("root"),id:D,...ye,variant:G,"data-accordion":!0,children:r})})}const lt=t=>t;f.extend=lt;f.withProps=Re(f);f.classes=M;f.displayName="@mantine/core/Accordion";f.Item=K;f.Panel=U;f.Control=W;f.Chevron=re;var he={root:"m_ddec01c0",icon:"m_dde7bd57",cite:"m_dde51a35"};const dt={iconSize:48},ut=ce((t,{color:s,iconSize:n,radius:o})=>{const d=Y({color:s||t.primaryColor,theme:t,colorScheme:"dark"}),i=Y({color:s||t.primaryColor,theme:t,colorScheme:"light"});return{root:{"--bq-bg-light":J(i.value,.07),"--bq-bg-dark":J(d.value,.06),"--bq-bd":ze(s,t),"--bq-icon-size":de(n),"--bq-radius":le(o)}}}),T=z((t,s)=>{const n=k("Blockquote",dt,t),{classNames:o,className:d,style:i,styles:u,unstyled:l,vars:r,children:m,icon:a,iconSize:v,cite:g,attributes:b,...c}=n,p=ae({name:"Blockquote",classes:he,props:n,className:d,style:i,classNames:o,styles:u,unstyled:l,attributes:b,vars:r,varsResolver:ut});return e.jsxs(A,{component:"blockquote",ref:s,...p("root"),...c,children:[a&&e.jsx("span",{...p("icon"),children:a}),m,g&&e.jsx("cite",{...p("cite"),children:g})]})});T.classes=he;T.displayName="@mantine/core/Blockquote";const mt=()=>{const t=w(r=>r.flags.isScreenshotTest);let s=w(r=>r.online.inviteLink);t&&(s="12345678-abcd-abcd-abcd-a7a7a7a7a7a7");const n=w(r=>r.online.onlineState),o=Me(),[d,i]=x.useState(!1),u=L(N.Success),l=L(N.Neutral);return e.jsxs(Ge,{justify:"flex-start",gap:"xs",children:[e.jsx(Le,{pt:"sm",order:5,children:X().connectionTypeForTogetherOnline===Q.ById?y("copyIDAndInviteFriend"):y("copyLinkAndInviteFriend")}),n===ue.WAIT_FRIEND?e.jsx(Ne,{value:s,timeout:2e3,children:({copied:r,copy:m})=>e.jsxs(j,{direction:"row",align:"center",gap:4,pb:4,mih:32,children:[e.jsx(j,{display:"grid",onClick:()=>{m(),i(!0)},style:{cursor:r?"default":"pointer"},children:e.jsx(O,{truncate:"end",component:"div",size:"md",children:s})}),e.jsx($e,{color:r?"teal":"gray",variant:"subtle",onClick:()=>{m(),i(!0)},id:E.modal.onlineTogetherGameStatus.copyInviteLinkButton,children:e.jsx(De,{children:r?e.jsx(Be,{color:u,size:o.small||Z.xs}):e.jsx(Ee,{color:l,size:o.small||Z.xs})})})]})}):e.jsxs(j,{direction:"row",align:"center",gap:4,mih:32,children:[e.jsx(O,{component:"div",size:"md",children:y("connectingToTheServer")}),e.jsx(qe,{width:20,height:20})]}),e.jsx(q,{in:d,children:X().connectionTypeForTogetherOnline===Q.ById?e.jsx(T,{p:"xs",children:y("inviteFriendByIdStayMessage")}):e.jsxs(e.Fragment,{children:[e.jsx(T,{p:"xs",children:y("inviteFriendStayMessage")}),e.jsx(T,{p:"xs",children:y("inviteFriendStartMessage")})]})})]})},pe={content:{padding:0},item:{border:"none"}},ht=()=>{const t=w(l=>l.online.inviteLinkDetails),s=w(l=>l.online.withFriendOpenedLobby),n=We(),[o,d]=x.useState(!1),i=()=>{o&&d(!1),t!==null&&ee.lobbyCreate$.next({public:!1,payload:t})};x.useEffect(()=>i,[]),x.useEffect(()=>{i()},[t]),x.useEffect(()=>{!s&&o&&i()},[s]);const u=()=>{s&&t!==null&&(d(!0),ee.lobbyCreate$.next({public:!0,payload:t}))};return e.jsx(f.Item,{value:"true",children:e.jsx(f.Panel,{children:e.jsxs(j,{gap:"xs",align:"flex-start",direction:"column",justify:"center",children:[e.jsx(T,{p:"xs",children:y("openLobbyDescription")}),e.jsxs(j,{gap:"xs",align:"center",justify:"center",children:[e.jsx(Ke,{size:"sm",loading:o,onClick:o?void 0:u,disabled:o,children:e.jsx(O,{children:y("createGame")})}),e.jsxs(f,{defaultValue:"",value:o?n.toString():"",styles:pe,children:[e.jsx(f.Item,{value:"false",children:e.jsx(f.Panel,{children:e.jsx(O,{children:y("connectionToOpponent")})})}),e.jsx(f.Item,{value:"true",children:e.jsx(f.Panel,{children:e.jsx(O,{children:y("connecting")})})})]})]})]})})})},pt=({HandicapSettings:t,gameSettingsOptions:s})=>{const n=w(u=>u.online.withFriendOpenedLobby),o=R(u=>u.online.setWithFriendOpenedLobby),d=R(u=>u.online.updateInviteLink),i=He();return x.useEffect(()=>{i&&(console.log("peer updateInviteLink",i),d())},[n,i]),e.jsxs(j,{direction:"column",gap:"md",children:[e.jsx(j,{direction:"column",gap:"md",children:e.jsx(et,{size:"md",label:n?y("publicGame"):y("privateGame"),checked:n,onChange:()=>o(!n)})}),e.jsxs(f,{defaultValue:"true",value:n.toString(),styles:pe,children:[e.jsx(ht,{}),e.jsx(f.Item,{value:"false",children:e.jsx(f.Panel,{children:e.jsx(mt,{})})})]}),e.jsx(Ze,{betSettings:!0,HandicapSettings:t,gameSettingsOptions:s})]})},gt=t=>{const{HandicapSettings:s,gameSettingsOptions:n}=t,{closeModal:o}=Ue(Ve.OnlineTogetherGameStatusModal),d=R(g=>g.modals.waitCustomConfirmModal),i=R(g=>g.gameSettings.resetHandicap),u=R(g=>g.online.setOfflineState),l=w(g=>g.online.onlineState),r=L(N.Reject),m=L(N.Primary),a=x.useCallback(()=>{l===ue.WAIT_FRIEND&&u({ignorePassive:!0,ignoreGameState:!0,reason:"close_play-online_together_modal"}),te.isCrazyGames()&&window.CrazyGames.SDK.game.hideInviteButton(),o()},[l]),v=()=>{te.isCrazyGames()?d({title:y("areYouSure"),applyColor:r,cancelColor:m,buttonPosSwitch:!1}).then(g=>{g&&a()}):a()};return Ye().feature[Je.OnlineTogether]?e.jsx(Qe,{id:E.modal.onlineTogetherGameStatus.index,idCloseButton:E.modal.onlineTogetherGameStatus.closeButton,visible:!0,onClose:()=>{v(),i&&i()},title:y("playOnlineWithFriend"),titleCentered:!0,autoSize:!1,children:e.jsx(Xe,{justify:"center",w:"100%",children:e.jsx(j,{direction:"column",w:"100%",children:e.jsx(pt,{HandicapSettings:s,gameSettingsOptions:n})})})}):null},Ft=se.memo(gt);export{Ft as default};
